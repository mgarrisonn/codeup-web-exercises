<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Weather Map</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">
    <script src='https://api.mapbox.com/mapbox-gl-js/v1.10.0/mapbox-gl.js'></script>
    <link href='https://api.mapbox.com/mapbox-gl-js/v1.10.0/mapbox-gl.css' rel='stylesheet' />
</head>
<body>
<style>
    #map {
        width:100%;
        height:500px;
    }
</style>
<h1 class="bg-primary text-white pl-3">Weather App</h1>
<!--<div class="float-right">Current City:</div>-->
<br>
<form class="form-inline">
    <div class="pl-5 pr-3">Place</div>
    <input class="form-control mr-sm-2 max-auto" type="search" placeholder="Find a location" aria-label="Search">
    <button class="btn  btn-primary " type="submit">Find</button>
</form>
<br>
<div id="weather-info">
    <section class="row invisible " style="display: none">
            <div class="card-body">
                <div class="card" style="width: 13rem;">
                    <div class="card-header">Date</div>
                    <ul class="weather-list list-group list-group-flush">
                        <li class="list-group-item"></li>
                        <li class="list-group-item">Description:</li>
                        <li class="list-group-item">Humidity:</li>
                        <li class="list-group-item">Wind:</li>
                        <li class="list-group-item">Pressure:</li>
                    </ul>
                </div>
            </div>
<!--            <div class="card-body">-->
<!--                <div class="card" style="width: 13rem;">-->
<!--                    <div class="card-header">Date</div>-->
<!--                    <ul class="list-group list-group-flush">-->
<!--                        <li class="list-group-item"></li>-->
<!--                        <li class="list-group-item">Description:</li>-->
<!--                        <li class="list-group-item">Humidity:</li>-->
<!--                        <li class="list-group-item">Wind:</li>-->
<!--                        <li class="list-group-item">Pressure:</li>-->
<!--                    </ul>-->
<!--                </div>-->
<!--            </div>-->
<!--            <div class="card-body">-->
<!--                <div class="card" style="width: 13rem;">-->
<!--                    <div class="card-header">Date</div>-->
<!--                    <ul class="list-group list-group-flush">-->
<!--                        <li class="list-group-item"></li>-->
<!--                        <li class="list-group-item">Description:</li>-->
<!--                        <li class="list-group-item">Humidity:</li>-->
<!--                        <li class="list-group-item">Wind:</li>-->
<!--                        <li class="list-group-item">Pressure:</li>-->
<!--                    </ul>-->
<!--                </div>-->
<!--            </div>-->
<!--            <div class="card-body">-->
<!--                <div class="card" style="width: 13rem;">-->
<!--                    <div class="card-header">Date</div>-->
<!--                    <ul class="list-group list-group-flush">-->
<!--                        <li class="list-group-item"></li>-->
<!--                        <li class="list-group-item">Description:</li>-->
<!--                        <li class="list-group-item">Humidity:</li>-->
<!--                        <li class="list-group-item">Wind:</li>-->
<!--                        <li class="list-group-item">Pressure:</li>-->
<!--                    </ul>-->
<!--                </div>-->
<!--            </div>-->
<!--            <div class="card-body">-->
<!--                <div class="card" style="width: 13rem;">-->
<!--                    <div class="card-header">Date</div>-->
<!--                    <ul class="list-group list-group-flush">-->
<!--                        <li class="list-group-item"></li>-->
<!--                        <li class="list-group-item">Description:</li>-->
<!--                        <li class="list-group-item">Humidity:</li>-->
<!--                        <li class="list-group-item">Wind:</li>-->
<!--                        <li class="list-group-item">Pressure:</li>-->
<!--                    </ul>-->
<!--                </div>-->
<!--            </div>-->
    </section>
</div>
<div id ='map'></div>

<script
        src="http://code.jquery.com/jquery-3.5.1.min.js"
        integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
        crossorigin="anonymous">
</script>
<script src="js/keys.js"></script>
<script>
    "use strict";
    var weatherUrl = 'https://api.openweathermap.org/data/2.5/onecall';
    var weatherOptions = {
        lat: 29.4241,
        lon: -98.4936,
        appid: OPEN_WEATHER_MAP_KEY,
        exclude: 'minutely, current, hourly',
        units: 'imperial',
        timezone: 'Chicago'
    };
    $.get(weatherUrl, weatherOptions).done(function (data) {
        console.log(data);
        console.log(data.daily);
        console.log(data.daily[0]);
        // for (var i = 0; i < data.daily.length; i++) {
        //     var html = "<ul class='weather-list'> ";
        //     html += "<li class='list-group-item'>" + new Date(data.daily[0].dt * 1000) + "</li>";
        //     html += "<li class='list-group-item'>" + data.daily[i].temp + "</li>";
        //     html += "<li class='list-group-item'>" + data.daily[i].weather[0].description + "</li>";
        //     html += "<li class='list-group-item'>" + +"</li>";
        //     html += "</ul>";
        // }
        // $('#weather-info').append(html);

      data.daily.forEach(function(day, index){
        if(index <= 4) {
            var grabDate = new Date(day.dt * 1000);
            var html = "<div class='card-body w-25 flex-sm-row float-left'>";
            html += "<div class='card-header text-center'>" + " " + (grabDate.getMonth() + 1) + "/" + grabDate.getDate() + "/" + grabDate.getFullYear() + "</div>";
            html += "<li class='list-group-item'>" + "High/Lows: " + day.temp.max + " &#8457;" + "/" + day.temp.min + " &#8457;" + "</li>";
            html += "<li class='list-group-item'>" + "Description: " + day.weather[0].description + "</li>";
            html += "<li class='list-group-item'>" + "Humidity: " + day.humidity + "</li>";
            html += "<li class='list-group-item'>" + "Wind: " + day.wind + "</li>";
            html += "<li class='list-group-item'>" + "Pressure: " + day.pressure + "</li>";

            html += "</div>";
            $('#weather-info').append(html);
        }
      });
    });

        mapboxgl.accessToken = mapboxKey;

        var map = new mapboxgl.Map({
            container:'map',
            style: 'mapbox://styles/mapbox/streets-v9',
            zoom: 10,
            center: {lng: -98.4936, lat: 29.4241},
        });

</script>
<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js" integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI" crossorigin="anonymous"></script>
</body>
</html>